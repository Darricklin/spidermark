## 一、多任务原理

在现代的操作系统中（Windows、linux、Android、iOS，mac等）都支持多任务。

在操作系统中多任务包括多线程和多进程，表现方式，并发，并行，串行（多个任务依次执行不能同时执行）

并发：操作系统让多个任务交替执行，比如一台主机同时开了qq、微信、脉脉等，qq执行2ns、微信执行2ns、脉脉执行，qq、微信、脉脉。。。由于CPU的运行速度非常快，所以从宏观上我们会感觉到这些任务是在同时执行

并行，需要多cpu的支持（如果是多核cpu或者多个cpu可以支持并行）：把多个任务执行在多个cpu上，不需要各个任务之间取抢占cpu资源





## 二、进程

对于一个操作系统而言，一个程序运行起来就会被创建出一个到多进程（包含进程id，进程代码，进程资源），一个进程在运行的过程中操作系统会给它分配相应的资源（包括内存资源、I/O资源），然后通过一定的算法分配到指定任务队列让它和其他进程或线程并发执行

【注意】进程是操作系统分配资源（内存资源和I/O资源）的基本单位



void func1(int a){

​	int b;

​	char c;

​	func2()

​	static int a;

​	return a+b;

}



int w;



int main(){

​	int a;

​	float b;

​	char c;

​	float * p;

​	func1(a)



​	p = malloc(1000)

​	free(p)

​	

​	a = 10

​	p = "12341254"



​	return  0

​	}

## 三、线程

在一个进程中，如果要同时执行多个任务，就需要通过多线程机制来操作

现在的操作系统，在为一个程序创建进程的时候，首先会给这个进程分配内存资源和I/O资源（不会直接把处理机分配给进程），然后给该进程创建一个或者多个线程（这些线程中有且只有一个主线程），如果任务比较多，会用主线程取开辟一些子线程来操作



同一个进程中的所有的线程资源是共享，共享进程的资源，线程无法独立分配资源，线程只能用于抢占处理机，多个线程之间是并发执行

【注意】线程是操作系统分配处理机的最小单位，一个进程至少要有一个线程。

【注意】线程和进程一旦开启，就不再受到程序的控制，只有操作系统才能控制他们开启、调度与关闭

## 四、协程

子程序/函数：在所有的语言中都是层级调用，比如A调用B，在B执行的过程中又可以调用C，C执行完毕以后返回，B执行完毕以后返回A，最后A执行完毕。这些调用都是通过栈来实现的，一个线程执行的就是一个子程序，子程序在调用的时候会有一个入口和一个出口，这个调用顺序是明确的。



协程：看上去是一个子程序，但是在执行的过程中，子程序内部可以中断，然后去执行其他的子程序，而不是函数调用







